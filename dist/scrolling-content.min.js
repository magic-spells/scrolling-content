!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";class ScrollingTrack extends HTMLElement{connectedCallback(){this.style.display="flex",this.style.flexWrap="nowrap",this.style.alignItems="center",this.style.gap="var(--scrolling-content-gap, 1rem)",this.style.cursor="pointer",this.style.touchAction="pan-y",this.dataset.gap&&(this.style.gap=`${parseFloat(this.dataset.gap)}px`)}}customElements.define("scrolling-track",ScrollingTrack);class ScrollingItem extends HTMLElement{connectedCallback(){this.style.display="flex",this.style.alignItems="center",this.style.gap="var(--scrolling-content-gap, 1rem)",this.dataset.pad&&(this.style.padding=`${parseFloat(this.dataset.pad)}px`)}}customElements.define("scrolling-item",ScrollingItem);class ScrollingContent extends HTMLElement{static get observedAttributes(){return["data-mobile-speed","data-desktop-speed","data-breakpoint"]}constructor(){super();const t=this;t.track=null,t.items=[],t.mobileSpeed=40,t.desktopSpeed=60,t.breakpoint=767,t.isRunning=!1,t.isHoverPaused=!1,t.isDragging=!1,t.prevTime=0,t.offsetX=0,t.dragStartX=0,t.dragStartY=0,t.startOffset=0,t.containerWidth=0,t.loopDistance=0,t.rafId=null,t.resizeHandler=()=>t.handleResize(),t.scrollDirection=null,t.directionThreshold=10}connectedCallback(){const t=this;t.initElements(),t.readAttributes(),requestAnimationFrame((()=>{t.checkTrackWidth(),t.attachEvents(),t.start()}))}attributeChangedCallback(t,e,i){e!==i&&(this.readAttributes(),this.isHoverPaused||this.isDragging||(this.stop(),this.start()))}initElements(){const t=this;if(t.style.overflow="hidden",t.track=t.querySelector("scrolling-track"),!t.track){for(t.track=document.createElement("scrolling-track");t.firstChild;)t.track.appendChild(t.firstChild);t.appendChild(t.track)}if(!t.track.querySelector("scrolling-item")){const e=document.createElement("scrolling-item");for(;t.track.firstChild;)e.appendChild(t.track.firstChild);t.track.appendChild(e)}t.items=Array.from(t.track.children),Object.assign(t.track.style,{display:"flex",willChange:"transform"}),t.containerWidth=t.getBoundingClientRect().width}readAttributes(){const t=this,e=(e,i)=>isNaN(parseFloat(t.getAttribute(e)))?i:parseFloat(t.getAttribute(e));t.mobileSpeed=e("data-mobile-speed",t.mobileSpeed),t.desktopSpeed=e("data-desktop-speed",t.desktopSpeed),t.breakpoint=e("data-breakpoint",t.breakpoint)}checkTrackWidth(){const t=this;if(!t.items.length)return;const e=t.items[0].getBoundingClientRect().width,i=getComputedStyle(t.track),n=parseFloat(i.gap)||0;t.loopDistance=e+n;const s=Math.ceil(2*t.containerWidth/e)+1;for(let e=t.items.length;e<s;e++){const e=t.items[0].cloneNode(!0);t.track.appendChild(e)}t.items=Array.from(t.track.children)}attachEvents(){const t=this;t.addEventListener("mouseenter",(()=>{t.isHoverPaused=!0,t.stop()})),t.addEventListener("mouseleave",(()=>{t.isHoverPaused=!1,t.isDragging||t.start()})),t.track.addEventListener("pointerdown",(e=>t.onPointerDown(e))),window.addEventListener("pointermove",(e=>t.onPointerMove(e))),window.addEventListener("pointerup",(e=>t.onPointerUp(e))),window.addEventListener("pointercancel",(e=>t.onPointerUp(e))),window.addEventListener("resize",t.resizeHandler)}start(){const t=this;t.isRunning||(t.isRunning=!0,t.prevTime=performance.now(),t.rafId=requestAnimationFrame((e=>t.tick(e))))}stop(){const t=this;t.isRunning&&(cancelAnimationFrame(t.rafId),t.isRunning=!1,t.rafId=null)}tick(t){const e=this;if(!e.isRunning)return;const i=(t-e.prevTime)/1e3;e.prevTime=t,e.offsetX-=e.getCurrentSpeed()*i,e.offsetX<=-e.loopDistance&&(e.offsetX+=e.loopDistance),e.track.style.transform=`translateX(${e.offsetX}px)`,e.rafId=requestAnimationFrame((t=>e.tick(t)))}getCurrentSpeed(){return window.innerWidth<=this.breakpoint?this.mobileSpeed:this.desktopSpeed}onPointerDown(t){const e=this;e.isDragging=!0,e.dragStartX=t.clientX,e.dragStartY=t.clientY,e.startOffset=e.offsetX,e.scrollDirection=null,e.stop(),e.track.setPointerCapture(t.pointerId)}onPointerMove(t){const e=this;if(!e.isDragging)return;const i=t.clientX-e.dragStartX,n=t.clientY-e.dragStartY;if(!e.scrollDirection){const t=Math.abs(i),s=Math.abs(n);(t>e.directionThreshold||s>e.directionThreshold)&&(e.scrollDirection=t>s?"horizontal":"vertical")}if("horizontal"===e.scrollDirection){for(t.cancelable&&t.preventDefault(),e.offsetX=e.startOffset+i;e.offsetX<=-e.loopDistance;)e.offsetX+=e.loopDistance;for(;e.offsetX>0;)e.offsetX-=e.loopDistance;e.track.style.transform=`translateX(${e.offsetX}px)`}else if("vertical"===e.scrollDirection){try{e.track.releasePointerCapture(t.pointerId)}catch{}e.isDragging=!1,e.scrollDirection=null,e.isHoverPaused||e.start()}else t.cancelable&&t.preventDefault()}onPointerUp(t){const e=this;if(e.isDragging){e.isDragging=!1,e.scrollDirection=null;try{e.track.releasePointerCapture(t.pointerId)}catch{}e.isHoverPaused||e.start()}}handleResize(){const t=this,e=t.getBoundingClientRect().width;if(e!==t.containerWidth){for(t.containerWidth=e,t.checkTrackWidth(),t.offsetX=t.offsetX%t.loopDistance;t.offsetX<=-t.loopDistance;)t.offsetX+=t.loopDistance;for(;t.offsetX>0;)t.offsetX-=t.loopDistance;t.track.style.transform=`translateX(${t.offsetX}px)`}}}customElements.define("scrolling-content",ScrollingContent)}));
//# sourceMappingURL=scrolling-content.min.js.map
